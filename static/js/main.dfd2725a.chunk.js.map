{"version":3,"sources":["components/Searchbar/SearchBar.styled.js","components/Searchbar/SearchBar.jsx","components/ImageGalleryItem/ImageGalleryItem.styled.js","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Loader/Loader.jsx","services/fetchImages.js","components/Button/LoadMoreButton.styled.js","components/Button/Button.jsx","components/ImageGallery/ImageGallery.jsx","components/Modal/Modal.styled.js","components/Modal/Modal.jsx","components/App.js","index.js"],"names":["Header","styled","header","Form","form","Input","input","Button","button","SearchBar","props","handleInputChange","e","preventDefault","handleSubmittedForm","currentTarget","elements","query","value","bind","onSubmit","this","type","name","autoComplete","autoFocus","placeholder","Component","GalleryList","ul","ListItem","li","img","ImageGalleryItem","webformatURL","tags","handleSelectedImage","largeImageURL","onClick","src","alt","width","height","ContentLoader","color","timeout","axios","require","searchQuery","page","a","get","response","data","console","log","ButtonLoadMore","LoadMoreButton","ImageGallery","handleLoadMoreBtnClick","setState","prevState","state","images","status","onScroll","prevProps","currentQuery","prevQuery","prevPage","currentPage","fetchImages","then","totalHits","hits","window","scrollTo","top","document","documentElement","scrollHeight","behavior","map","id","toast","error","ModalBackdrop","div","ModalContent","modalRoot","querySelector","Modal","handleKeydown","code","onModalClose","handleBackdropClick","target","addEventListener","body","style","overflow","createPortal","App","handleFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dfd2725a.chunk.js","sourcesContent":["import styled from \"@emotion/styled\";\n\nexport const Header = styled.header`\n  width: 100%;\n  height: 50px;\n  background-color: lightgrey;\n`;\n\nexport const Form = styled.form`\n  display: flex;\n  justify-content: center;\n  padding: 15px;\n`;\n\nexport const Input = styled.input`\n  width: 250px;\n  height: 15px;\n`;\n\nexport const Button = styled.button`\n  &:hover,\n  &:focus {\n    background-color: white;\n    cursor: pointer;\n  }\n`;\n","import { Component } from \"react\";\nimport { Header, Form, Input, Button } from \"./SearchBar.styled\";\n\nexport class SearchBar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  handleInputChange = (e) => {\n    e.preventDefault();\n    this.props.handleSubmittedForm(e.currentTarget.elements.query.value);\n    e.currentTarget.elements.query.value = \"\";\n  };\n\n  render() {\n    return (\n      <Header>\n        <Form onSubmit={this.handleInputChange}>\n          <Input\n            type=\"text\"\n            name=\"query\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n\n          <Button type=\"submit\">\n            <span>Search</span>\n          </Button>\n        </Form>\n      </Header>\n    );\n  }\n}\n","import styled from \"@emotion/styled\";\n\nexport const GalleryList = styled.ul`\n  list-style: none;\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nexport const ListItem = styled.li`\n  width: 300px;\n  height: 200px;\n  margin: 5px;\n  object-fit: cover;\n\n  &:hover,\n  &:focus {\n    // border: 1px solid lightgrey;\n    cursor: pointer;\n  }\n`;\n\nexport const Image = styled.img`\n  display: inline-block;\n  object-fit: cover;\n`;\n","import { ListItem } from \"./ImageGalleryItem.styled\";\n\nexport function ImageGalleryItem({\n  webformatURL,\n  tags,\n  handleSelectedImage,\n  largeImageURL,\n}) {\n  return (\n    <ListItem onClick={() => handleSelectedImage(largeImageURL, tags)}>\n      <img src={webformatURL} alt={tags} width=\"300\" height=\"200\" />\n    </ListItem>\n  );\n}\n","import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\n\nexport function ContentLoader() {\n  return (\n    <Loader\n      type=\"Puff\"\n      color=\"#00BFFF\"\n      height={100}\n      width={100}\n      timeout={3000} //3 secs\n    />\n  );\n}\n","const axios = require(\"axios\");\n\nexport async function fetchImages(searchQuery, page) {\n  const KEY = \"22675606-31d87174acbb5d82d82bc8eb4\";\n\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${KEY}&q=${searchQuery}&page=${page}&image_type=photo&orientation=horizontal&per_page=20`\n    );\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import styled from \"@emotion/styled\";\n\nexport const ButtonLoadMore = styled.button`\n  margin: 0 auto;\n  padding: 8px 16px;\n  display: inline-block;\n  width: 180px;\n\n  border: 0;\n  border-radius: 2px;\n  background-color: lightgrey;\n\n  color: graphit;\n  text-decoration: none;\n  text-align: center;\n  font-size: 18px;\n  line-height: 24px;\n  font-weight: 500;\n\n  cursor: pointer;\n\n  &:hover,\n  &:focus {\n    border: 1px solid white;\n  }\n`;\n","import { ButtonLoadMore } from \"./LoadMoreButton.styled\";\n\nexport function LoadMoreButton({ onClick }) {\n  return (\n    <ButtonLoadMore type=\"button\" onClick={onClick}>\n      Load more\n    </ButtonLoadMore>\n  );\n}\n","import { Component } from \"react\";\nimport { ImageGalleryItem } from \"../ImageGalleryItem/ImageGalleryItem\";\nimport { ContentLoader } from \"../Loader/Loader\";\nimport { fetchImages } from \"../../services/fetchImages\";\nimport { LoadMoreButton } from \"../Button/Button\";\nimport { GalleryList } from \"../ImageGalleryItem/ImageGalleryItem.styled\";\nimport { toast } from \"react-toastify\";\n\nexport class ImageGallery extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      images: [],\n      page: 1,\n      status: \"idle\",\n    };\n\n    this.handleLoadMoreBtnClick = this.handleLoadMoreBtnClick.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const currentQuery = this.props.searchQuery;\n    const prevQuery = prevProps.searchQuery;\n    const prevPage = prevState.page;\n    const currentPage = this.state.page;\n    const { page } = this.state;\n\n    if (currentQuery !== prevQuery || prevPage !== currentPage) {\n      fetchImages(currentQuery, page).then((data) => {\n        if (data.totalHits === 0) {\n          return this.setState({ status: \"rejected\" });\n        }\n\n        if (page === 1) {\n          return this.setState({ images: data.hits, status: \"resolved\" });\n        }\n\n        if (page > 1) {\n          this.onScroll();\n          return this.setState((prevState) => ({\n            images: [...prevState.images, ...data.hits],\n            status: \"resolved\",\n          }));\n        }\n      });\n    }\n  }\n\n  onScroll() {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  }\n\n  handleLoadMoreBtnClick = (e) => {\n    e.preventDefault();\n    this.setState((prevState) => ({ page: prevState.page + 1 }));\n    return;\n  };\n\n  render() {\n    const { status, images } = this.state;\n\n    if (status === \"idle\") {\n      return <p>Пожалуйста, введите поисковый запрос.</p>;\n    }\n\n    if (status === \"pending\") {\n      return <ContentLoader />;\n    }\n\n    if (status === \"resolved\") {\n      return (\n        <GalleryList>\n          {images.map(({ id, webformatURL, tags, largeImageURL }) => {\n            return (\n              <ImageGalleryItem\n                key={id}\n                webformatURL={webformatURL}\n                tags={tags}\n                largeImageURL={largeImageURL}\n                handleSelectedImage={this.props.handleSelectedImage}\n              />\n            );\n          })}\n\n          <LoadMoreButton onClick={this.handleLoadMoreBtnClick} />\n        </GalleryList>\n      );\n    }\n\n    if (status === \"rejected\") {\n      return toast.error(\n        `Изображения с именем ${this.props.searchQuery} не найдены!`\n      );\n    }\n  }\n}\n","import styled from \"@emotion/styled\";\n\nexport const ModalBackdrop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n`;\n\nexport const ModalContent = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  height: 600px;\n  width: 960px;\n  padding: 12px;\n  background-color: #fff;\n  border-radius: 3px;\n  box-shadow: 0px 2px 1px -1px rgba(0, 0, 0, 0.2),\n    0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12);\n`;\n","import { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { ModalBackdrop, ModalContent } from \"./Modal.styled\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport class Modal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleKeydown = this.handleKeydown.bind(this);\n    this.handleBackdropClick = this.handleBackdropClick.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeydown);\n    document.body.style.overflow = \"hidden\";\n  }\n\n  componentWillUnmount() {\n    window.addEventListener(\"keydown\", this.handleKeydown);\n    document.body.style.overflow = \"unset\";\n  }\n\n  handleKeydown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.onModalClose();\n    }\n  };\n\n  handleBackdropClick = (e) => {\n    if (e.currentTarget === e.target) {\n      this.props.onModalClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <ModalBackdrop onClick={this.handleBackdropClick}>\n        <ModalContent>\n          <img\n            src={this.props.largeImageURL}\n            alt={this.props.tags}\n            width=\"960\"\n            height=\"600\"\n          />\n        </ModalContent>\n      </ModalBackdrop>,\n      modalRoot\n    );\n  }\n}\n","import { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport { SearchBar } from \"./Searchbar/SearchBar\";\nimport { ImageGallery } from \"./ImageGallery/ImageGallery\";\nimport { Modal } from \"./Modal/Modal\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      searchQuery: \"\",\n      largeImageURL: null,\n      tags: \"\",\n    };\n\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.onModalClose = this.onModalClose.bind(this);\n    this.handleSelectedImage = this.handleSelectedImage.bind(this);\n  }\n\n  handleFormSubmit = (searchQuery) => {\n    this.setState({ searchQuery });\n  };\n\n  handleSelectedImage = (largeImageURL, tags) => {\n    this.setState({ largeImageURL, tags });\n  };\n\n  onModalClose = () => {\n    this.setState({ largeImageURL: null });\n  };\n\n  render() {\n    const { searchQuery, largeImageURL, tags } = this.state;\n    return (\n      <div>\n        <SearchBar handleSubmittedForm={this.handleFormSubmit} />\n        <ImageGallery\n          searchQuery={searchQuery}\n          handleSelectedImage={this.handleSelectedImage}\n        />\n        {largeImageURL !== null && (\n          <Modal\n            onModalClose={this.onModalClose}\n            largeImageURL={largeImageURL}\n            tags={tags}\n          />\n        )}\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"./index.css\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}